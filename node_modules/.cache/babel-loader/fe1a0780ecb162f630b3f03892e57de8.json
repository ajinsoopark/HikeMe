{"ast":null,"code":"import _classCallCheck from \"/Users/alexpark/pursuit/hackathon/HikeMe/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/alexpark/pursuit/hackathon/HikeMe/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/alexpark/pursuit/hackathon/HikeMe/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/alexpark/pursuit/hackathon/HikeMe/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/alexpark/pursuit/hackathon/HikeMe/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/alexpark/pursuit/hackathon/HikeMe/frontend/src/components/Home/home.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Map from './map.js';\nimport SideBar from './sidebar.js';\nimport '../../css/Home.css';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this));\n\n    _this.getDistanceData = function (string) {\n      var _this$state = _this.state,\n          longitude = _this$state.longitude,\n          latitude = _this$state.latitude;\n      axios.get(\"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=\".concat(latitude, \",\").concat(longitude, \"&destinations=\").concat(string, \"&key=AIzaSyAm8VcTZZ0P2oJCVLZ4ZDy5RK2UYxMxDlc\")).then(function (res) {\n        var normalizeDistance = res.data.rows[0].elements.map(function (el) {\n          return el = el.distance.text;\n        });\n\n        _this.setState({\n          distances: normalizeDistance\n        });\n      });\n    };\n\n    _this.fetchLocation = function () {\n      // console.log(\"fetchLocation!!!\");\n      return axios.get(\"https://www.hikingproject.com/data/get-trails?lat=\".concat(_this.state.latitude, \"&lon=\").concat(_this.state.longitude, \"&maxDistance=10&key=200430061-384fefbb8ceed621af7cea7e5ab597b2\")).then(function (res) {\n        // console.log(\"Res Hiking!!!!\", res.data.trails);\n        _this.setState({\n          markers: res.data.trails\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.coordinateString = function () {\n      return _this.state.markers.map(function (el) {\n        return el.latitude + \"%2C\" + el.longitude + \"%7C\";\n      }).join('').slice(0, -3); // console.log(\"coorStr=>\",output,this.state.markers);\n    };\n\n    _this.state = {\n      markers: [],\n      latitude: \"\",\n      longitude: \"\",\n      userIP: \"\",\n      distances: []\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(\"https://jsonip.com/\").then(function (res) {\n        _this2.setState({\n          userIP: res.data.ip\n        }); // console.log(\"ip: \", res.data.ip);\n\n      }).then(function () {\n        var apikey = \"45c642a38d6e8f01dac07ba1f003505a\";\n        axios.get(\"http://api.ipstack.com/\".concat(_this2.state.userIP, \"?access_key=\").concat(apikey)).then(function (res) {\n          // console.log(\"result long/ lat!!!: \", res)\n          _this2.setState({\n            latitude: res.data.latitude,\n            longitude: res.data.longitude\n          });\n        }).then(function () {\n          _this2.fetchLocation().then(function () {\n            _this2.getDistanceData(_this2.coordinateString());\n          });\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          markers = _this$state2.markers,\n          latitude = _this$state2.latitude,\n          longitude = _this$state2.longitude,\n          userIP = _this$state2.userIP,\n          distances = _this$state2.distances;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"home-main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(SideBar, {\n        distances: distances,\n        trails: markers,\n        currentLon: longitude,\n        currentLat: latitude,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(Map, {\n        markers: markers,\n        latitude: latitude,\n        longitude: longitude,\n        userIP: userIP,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport { Home as default };","map":{"version":3,"sources":["/Users/alexpark/pursuit/hackathon/HikeMe/frontend/src/components/Home/home.js"],"names":["React","Component","axios","Map","SideBar","Home","getDistanceData","string","state","longitude","latitude","get","then","res","normalizeDistance","data","rows","elements","map","el","distance","text","setState","distances","fetchLocation","markers","trails","catch","err","console","log","coordinateString","join","slice","userIP","ip","apikey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport Map from './map.js';\nimport SideBar from './sidebar.js';\n\nimport '../../css/Home.css';\n\nexport default class Home extends Component {\n  constructor(){\n    super()\n    this.state = {\n      markers: [],\n      latitude: \"\",\n      longitude: \"\",\n      userIP: \"\",\n      distances: []\n    }\n  }\n\n  componentDidMount() {\n    axios\n       .get(\"https://jsonip.com/\")\n       .then(res => {\n         this.setState({\n           userIP: res.data.ip\n         });\n         // console.log(\"ip: \", res.data.ip);\n       })\n       .then(() => {\n         let apikey = \"45c642a38d6e8f01dac07ba1f003505a\";\n         axios.get(`http://api.ipstack.com/${this.state.userIP}?access_key=${apikey}`)\n                 .then(res => {\n                   // console.log(\"result long/ lat!!!: \", res)\n                   this.setState({\n                     latitude: res.data.latitude,\n                     longitude: res.data.longitude\n                   })\n                 })\n                 .then(() => {\n                        this.fetchLocation()\n                        .then(() => {\n                              this.getDistanceData(this.coordinateString())\n                            })\n                      })\n       })\n       .catch(err => {\n         console.log(err)\n       })\n  }\n  getDistanceData = (string) => {\n    let {longitude, latitude} = this.state;\n     axios.get(`https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=${latitude},${longitude}&destinations=${string}&key=AIzaSyAm8VcTZZ0P2oJCVLZ4ZDy5RK2UYxMxDlc`)\n     .then(res => {\n       let normalizeDistance = res.data.rows[0].elements.map(el => {return el = el.distance.text})\n       this.setState({\n          distances: normalizeDistance\n        });\n     })\n   }\n  fetchLocation = () => {\n    // console.log(\"fetchLocation!!!\");\n    return axios\n      .get(\n        `https://www.hikingproject.com/data/get-trails?lat=${this.state.latitude}&lon=${this.state.longitude}&maxDistance=10&key=200430061-384fefbb8ceed621af7cea7e5ab597b2`\n      )\n      .then(res => {\n        // console.log(\"Res Hiking!!!!\", res.data.trails);\n        this.setState({\n          markers: res.data.trails\n        });\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  };\n  coordinateString = () => {\n    return this.state.markers.map(el=> {return el.latitude+\"%2C\"+el.longitude+\"%7C\"}).join('').slice(0,-3)\n    // console.log(\"coorStr=>\",output,this.state.markers);\n  }\n\n  render() {\n    const {markers, latitude, longitude, userIP, distances} = this.state\n    return (\n      <React.Fragment>\n        <div className=\"home-main-container\">\n          <SideBar distances={distances} trails={markers} currentLon={longitude} currentLat={latitude}/>\n          <Map markers={markers} latitude={latitude} longitude={longitude} userIP={userIP}/>\n        </div>\n\n      </React.Fragment>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}